{"ast":null,"code":"import _toConsumableArray from\"/Users/nemrnahle/n/fullstackopen/part2copyforbuild/phonebook/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import{useState}from'react';import axios from'axios';import phoneService from'./services/phonenumbers';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PersonForm=function PersonForm(_ref){var persons=_ref.persons,newName=_ref.newName,newNumber=_ref.newNumber,setPersons=_ref.setPersons,setNewName=_ref.setNewName,setNewNumber=_ref.setNewNumber,newMessage=_ref.newMessage,setNewMessage=_ref.setNewMessage,deleted=_ref.deleted,setDeleted=_ref.setDeleted,errorFlag=_ref.errorFlag,setErrorFlag=_ref.setErrorFlag;var addPerson=function addPerson(event){event.preventDefault();var personObject={name:newName,number:newNumber};if(persons.some(function(e){return e.name==newName;})){if(window.confirm(\"\".concat(newName,\" is already added to phonebook, replace the old number with a new one?\"))){var personIndex=persons.findIndex(function(person){return person.name===newName;});var personId=persons[personIndex].id;phoneService.update(personId,personObject).then(function(response){var newPersons=_toConsumableArray(persons);newPersons[personIndex]=response.data;setPersons(newPersons);setNewName('');setNewNumber('');setNewMessage(response.data.name);setDeleted(false);setTimeout(function(){setNewMessage(null);},5000);});/*axios.put(`http://localhost:3001/persons/${personId}`, personObject)\n      .then(response => {\n        let newPersons = [...persons]\n        newPersons[personIndex] = response.data\n        setPersons(newPersons)\n        setNewName('')\n        setNewNumber('')\n      })*/}setNewName('');setNewNumber('');}else{phoneService.create(personObject).then(function(returnedPerson){setPersons(persons.concat(returnedPerson));setNewName('');setNewNumber('');}).catch(function(error){setErrorFlag(true);setNewMessage(error.response.data.error);console.log(error.response.data.error);});}};var handleNameChange=function handleNameChange(event){setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){setNewNumber(event.target.value);};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:addPerson,children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"name: \",/*#__PURE__*/_jsx(\"input\",{value:newName,onChange:handleNameChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"number: \",/*#__PURE__*/_jsx(\"input\",{value:newNumber,onChange:handleNumberChange})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"add\"})})]})});};export default PersonForm;","map":{"version":3,"names":["useState","axios","phoneService","PersonForm","persons","newName","newNumber","setPersons","setNewName","setNewNumber","newMessage","setNewMessage","deleted","setDeleted","errorFlag","setErrorFlag","addPerson","event","preventDefault","personObject","name","number","some","e","window","confirm","personIndex","findIndex","person","personId","id","update","then","response","newPersons","data","setTimeout","create","returnedPerson","concat","catch","error","console","log","handleNameChange","target","value","handleNumberChange"],"sources":["/Users/nemrnahle/n/fullstackopen/part2copyforbuild/phonebook/src/PersonForm.js"],"sourcesContent":["import { useState } from 'react'\nimport axios from 'axios'\nimport phoneService from './services/phonenumbers'\n\n\nconst PersonForm = ({persons, newName, newNumber, setPersons, setNewName, setNewNumber, \n  newMessage, setNewMessage, deleted, setDeleted, errorFlag, setErrorFlag}) => {\n  const addPerson = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    }\n    if (persons.some(e => e.name == newName)) {\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n      const personIndex = persons.findIndex(person => person.name === newName)\n      const personId = persons[personIndex].id\n\n      phoneService\n        .update(personId, personObject)\n        .then(response => {\n          let newPersons = [...persons]\n          newPersons[personIndex] = response.data\n          setPersons(newPersons)\n          setNewName('')\n          setNewNumber('')\n          setNewMessage(response.data.name)\n          setDeleted(false)\n          setTimeout(() => {\n            setNewMessage(null)\n          }, 5000)\n        })\n      /*axios.put(`http://localhost:3001/persons/${personId}`, personObject)\n      .then(response => {\n        let newPersons = [...persons]\n        newPersons[personIndex] = response.data\n        setPersons(newPersons)\n        setNewName('')\n        setNewNumber('')\n      })*/\n    }\n      setNewName('')\n      setNewNumber('')\n  } else {\n    phoneService\n      .create(personObject)\n      .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson))\n        setNewName('')\n        setNewNumber('')\n      })\n      .catch(error => {\n        setErrorFlag(true)\n        setNewMessage(error.response.data.error)\n        console.log(error.response.data.error)\n      })\n    }\n  }\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  return (\n    <div>\n      <form onSubmit={addPerson}>\n        <div>\n          name: <input value={newName} onChange={handleNameChange}/>\n        </div>\n        <div>\n          number: <input value={newNumber} onChange={handleNumberChange}/>\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default PersonForm"],"mappings":"0JAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,MAAOC,MAAK,KAAM,OAAO,CACzB,MAAOC,aAAY,KAAM,yBAAyB,yFAGlD,GAAMC,WAAU,CAAG,QAAbA,WAAU,MAC+D,IAD1DC,QAAO,MAAPA,OAAO,CAAEC,OAAO,MAAPA,OAAO,CAAEC,SAAS,MAATA,SAAS,CAAEC,UAAU,MAAVA,UAAU,CAAEC,UAAU,MAAVA,UAAU,CAAEC,YAAY,MAAZA,YAAY,CACpFC,UAAU,MAAVA,UAAU,CAAEC,aAAa,MAAbA,aAAa,CAAEC,OAAO,MAAPA,OAAO,CAAEC,UAAU,MAAVA,UAAU,CAAEC,SAAS,MAATA,SAAS,CAAEC,YAAY,MAAZA,YAAY,CACvE,GAAMC,UAAS,CAAG,QAAZA,UAAS,CAAIC,KAAK,CAAK,CAC3BA,KAAK,CAACC,cAAc,EAAE,CACtB,GAAMC,aAAY,CAAG,CACnBC,IAAI,CAAEf,OAAO,CACbgB,MAAM,CAAEf,SACV,CAAC,CACD,GAAIF,OAAO,CAACkB,IAAI,CAAC,SAAAC,CAAC,QAAIA,EAAC,CAACH,IAAI,EAAIf,OAAO,GAAC,CAAE,CACxC,GAAImB,MAAM,CAACC,OAAO,WAAIpB,OAAO,2EAAyE,CAAE,CACxG,GAAMqB,YAAW,CAAGtB,OAAO,CAACuB,SAAS,CAAC,SAAAC,MAAM,QAAIA,OAAM,CAACR,IAAI,GAAKf,OAAO,GAAC,CACxE,GAAMwB,SAAQ,CAAGzB,OAAO,CAACsB,WAAW,CAAC,CAACI,EAAE,CAExC5B,YAAY,CACT6B,MAAM,CAACF,QAAQ,CAAEV,YAAY,CAAC,CAC9Ba,IAAI,CAAC,SAAAC,QAAQ,CAAI,CAChB,GAAIC,WAAU,oBAAO9B,OAAO,CAAC,CAC7B8B,UAAU,CAACR,WAAW,CAAC,CAAGO,QAAQ,CAACE,IAAI,CACvC5B,UAAU,CAAC2B,UAAU,CAAC,CACtB1B,UAAU,CAAC,EAAE,CAAC,CACdC,YAAY,CAAC,EAAE,CAAC,CAChBE,aAAa,CAACsB,QAAQ,CAACE,IAAI,CAACf,IAAI,CAAC,CACjCP,UAAU,CAAC,KAAK,CAAC,CACjBuB,UAAU,CAAC,UAAM,CACfzB,aAAa,CAAC,IAAI,CAAC,CACrB,CAAC,CAAE,IAAI,CAAC,CACV,CAAC,CAAC,CACJ;AACN;AACA;AACA;AACA;AACA;AACA;AACA,UACI,CACEH,UAAU,CAAC,EAAE,CAAC,CACdC,YAAY,CAAC,EAAE,CAAC,CACpB,CAAC,IAAM,CACLP,YAAY,CACTmC,MAAM,CAAClB,YAAY,CAAC,CACpBa,IAAI,CAAC,SAAAM,cAAc,CAAI,CACtB/B,UAAU,CAACH,OAAO,CAACmC,MAAM,CAACD,cAAc,CAAC,CAAC,CAC1C9B,UAAU,CAAC,EAAE,CAAC,CACdC,YAAY,CAAC,EAAE,CAAC,CAClB,CAAC,CAAC,CACD+B,KAAK,CAAC,SAAAC,KAAK,CAAI,CACd1B,YAAY,CAAC,IAAI,CAAC,CAClBJ,aAAa,CAAC8B,KAAK,CAACR,QAAQ,CAACE,IAAI,CAACM,KAAK,CAAC,CACxCC,OAAO,CAACC,GAAG,CAACF,KAAK,CAACR,QAAQ,CAACE,IAAI,CAACM,KAAK,CAAC,CACxC,CAAC,CAAC,CACJ,CACF,CAAC,CACD,GAAMG,iBAAgB,CAAG,QAAnBA,iBAAgB,CAAI3B,KAAK,CAAK,CAClCT,UAAU,CAACS,KAAK,CAAC4B,MAAM,CAACC,KAAK,CAAC,CAChC,CAAC,CAED,GAAMC,mBAAkB,CAAG,QAArBA,mBAAkB,CAAI9B,KAAK,CAAK,CACpCR,YAAY,CAACQ,KAAK,CAAC4B,MAAM,CAACC,KAAK,CAAC,CAClC,CAAC,CAED,mBACE,kCACE,cAAM,QAAQ,CAAE9B,SAAU,wBACxB,uBAAK,QACG,4BAAO,KAAK,CAAEX,OAAQ,CAAC,QAAQ,CAAEuC,gBAAiB,EAAE,GACtD,cACN,uBAAK,UACK,4BAAO,KAAK,CAAEtC,SAAU,CAAC,QAAQ,CAAEyC,kBAAmB,EAAE,GAC5D,cACN,kCACE,eAAQ,IAAI,CAAC,QAAQ,UAAC,KAAG,EAAS,EAC9B,GACD,EACH,CAEV,CAAC,CAED,cAAe5C,WAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}