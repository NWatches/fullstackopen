{"ast":null,"code":"var _jsxFileName = \"/Users/nemrnahle/nemr/fullstackopen/part2/phonebook/src/PersonForm.js\";\nimport { useState } from 'react';\nimport axios from 'axios';\nimport phoneService from './services/phonenumbers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PersonForm = _ref => {\n  let {\n    persons,\n    newName,\n    newNumber,\n    setPersons,\n    setNewName,\n    setNewNumber,\n    newMessage,\n    setNewMessage,\n    deleted,\n    setDeleted\n  } = _ref;\n  const addPerson = event => {\n    event.preventDefault();\n    const personObject = {\n      name: newName,\n      number: newNumber\n    };\n    if (persons.some(e => e.name == newName)) {\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        const personIndex = persons.findIndex(person => person.name === newName);\n        const personId = persons[personIndex].id;\n        phoneService.update(personId, personObject).then(response => {\n          let newPersons = [...persons];\n          newPersons[personIndex] = response.data;\n          setPersons(newPersons);\n          setNewName('');\n          setNewNumber('');\n          setNewMessage(response.data.name);\n          setDeleted(false);\n          setTimeout(() => {\n            setNewMessage(null);\n          }, 5000);\n        });\n        /*axios.put(`http://localhost:3001/persons/${personId}`, personObject)\n        .then(response => {\n          let newPersons = [...persons]\n          newPersons[personIndex] = response.data\n          setPersons(newPersons)\n          setNewName('')\n          setNewNumber('')\n        })*/\n      }\n\n      setNewName('');\n      setNewNumber('');\n    } else {\n      phoneService.create(personObject).then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson));\n        setNewName('');\n        setNewNumber('');\n      });\n    }\n  };\n  const handleNameChange = event => {\n    setNewName(event.target.value);\n  };\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: addPerson,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"name: \", /*#__PURE__*/_jsxDEV(\"input\", {\n          value: newName,\n          onChange: handleNameChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"number: \", /*#__PURE__*/_jsxDEV(\"input\", {\n          value: newNumber,\n          onChange: handleNumberChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"add\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n_c = PersonForm;\nexport default PersonForm;\nvar _c;\n$RefreshReg$(_c, \"PersonForm\");","map":{"version":3,"names":["useState","axios","phoneService","PersonForm","persons","newName","newNumber","setPersons","setNewName","setNewNumber","newMessage","setNewMessage","deleted","setDeleted","addPerson","event","preventDefault","personObject","name","number","some","e","window","confirm","personIndex","findIndex","person","personId","id","update","then","response","newPersons","data","setTimeout","create","returnedPerson","concat","handleNameChange","target","value","handleNumberChange"],"sources":["/Users/nemrnahle/nemr/fullstackopen/part2/phonebook/src/PersonForm.js"],"sourcesContent":["import { useState } from 'react'\nimport axios from 'axios'\nimport phoneService from './services/phonenumbers'\n\n\nconst PersonForm = ({persons, newName, newNumber, setPersons, setNewName, setNewNumber, newMessage, setNewMessage, deleted, setDeleted}) => {\n  const addPerson = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    }\n    if (persons.some(e => e.name == newName)) {\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n      const personIndex = persons.findIndex(person => person.name === newName)\n      const personId = persons[personIndex].id\n\n      phoneService\n        .update(personId, personObject)\n        .then(response => {\n          let newPersons = [...persons]\n          newPersons[personIndex] = response.data\n          setPersons(newPersons)\n          setNewName('')\n          setNewNumber('')\n          setNewMessage(response.data.name)\n          setDeleted(false)\n          setTimeout(() => {\n            setNewMessage(null)\n          }, 5000)\n        })\n      /*axios.put(`http://localhost:3001/persons/${personId}`, personObject)\n      .then(response => {\n        let newPersons = [...persons]\n        newPersons[personIndex] = response.data\n        setPersons(newPersons)\n        setNewName('')\n        setNewNumber('')\n      })*/\n    }\n      setNewName('')\n      setNewNumber('')\n  } else {\n    phoneService\n      .create(personObject)\n      .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson))\n        setNewName('')\n        setNewNumber('')\n      })\n    }\n  }\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n\n\n  return (\n    <div>\n      <form onSubmit={addPerson}>\n        <div>\n          name: <input value={newName} onChange={handleNameChange}/>\n        </div>\n        <div>\n          number: <input value={newNumber} onChange={handleNumberChange}/>\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default PersonForm"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}